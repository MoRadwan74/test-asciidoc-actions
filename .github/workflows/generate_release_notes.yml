name: Generate AsciiDoc Release Notes

on:
  workflow_run:
    workflows: [Check Release Notes Updating]
    types: [completed]

env:
  RELEASE_NOTES_PATH: "docs/modules/user-guide/pages/releases"
  CURRENT_RELEASE_NOTES_PATH: "docs/modules/user-guide/pages/releases/current_release_notes.json"
  GENERATED_RELEASE_NOTES_FILE_NAME: "release-*.adoc"

jobs:
  generate_adoc:
    # if: ${{ github.event.workflow_run.conclusion == 'success' && github.event.workflow_run.outputs.skip-check == 'false' && github.event.workflow_run.outputs.docs-changed == 'true' }}
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Print values for debugging
        run: |
          echo "Workflow conclusion: ${{ github.event.workflow_run.conclusion }}"
          echo "Skip check: ${{ github.event.workflow_run.outputs.skip-check }}"
          echo "Docs changed: ${{ github.event.workflow_run.outputs.docs-changed }}"
